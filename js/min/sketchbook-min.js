var marker="rgba(0,0,0,1)",markerWidth=1,lastEvent,mouseDown=!1,context=$("#canvas")[0].getContext("2d"),$canvas=$("#canvas");$canvas.mousedown(function(t){lastEvent=t,mouseDown=!0}).mousemove(function(t){mouseDown&&($(this).css("cursor","crosshair"),context.beginPath(),context.moveTo(lastEvent.offsetX,lastEvent.offsetY),context.lineTo(t.offsetX,t.offsetY),context.lineWidth=markerWidth,context.strokeStyle=marker,context.lineCap="round",context.stroke(),lastEvent=t)}).mouseup(function(){mouseDown=!1});var changeWidth=function(){markerWidth=$("#marker").val()};$("#marker").change(changeWidth);var clearCanvas=function(){context.clearRect(0,0,980,500)};$("#colorPicker").on("click","li",function(){marker=$(this).css("background-color")}),$("#clearCanvas").on("click",clearCanvas);